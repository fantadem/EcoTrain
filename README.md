# RÃ©duction de l'impact environnemental des plateformes de rÃ©servation de trains 

## Choix du sujet
On utilise presque tous le site ou lâ€™application de la SNCF pour regarder un horaire ou acheter un billet. Câ€™est devenu un rÃ©flexe du quotidien, un service que beaucoup considÃ¨rent comme indispensable, surtout quand on sait que 122 millions de voyageurs ont pris le TGV en 2023. On parle souvent du train comme dâ€™un moyen de transport Ã©cologique, mais on oublie que tout commence en ligne. 
Est-ce que lâ€™outil numÃ©rique quâ€™on utilise pour voyager est vraiment aussi Â« vert Â» quâ€™on le pense ? 
MÃªme si tout paraÃ®t immatÃ©riel, chaque clic consomme de lâ€™Ã©nergie. Notre objectif est donc simple : mesurer lâ€™impact environnemental de lâ€™application web de la SNCF, pour voir si la face numÃ©rique du train est aussi propre que ses rails. 
  
## UtilitÃ© sociale
### Des transports longue distance
Les transports longue distance, comme ceux proposÃ©s par la SNCF, sont bien plus quâ€™un simple moyen de se dÃ©placer : ils contribuent directement Ã  une mobilitÃ© plus durable et accessible pour tous.

**AccÃ¨s Ã  lâ€™emploi** : par exemple, un habitant de Romilly peut travailler Ã  Troyes ou mÃªme Ã  Paris grÃ¢ce aux liaisons ferroviaires rÃ©guliÃ¨res. Sans ces trajets, certaines carriÃ¨res seraient tout simplement impossibles.

**AccÃ¨s aux services publics** : santÃ©, Ã©ducation, administrationâ€¦ tout devient plus atteignable, mÃªme quand on vit loin des grandes villes.

**Lien entre les territoires** : le train connecte des rÃ©gions parfois isolÃ©es, crÃ©ant un sentiment dâ€™appartenance nationale.

**Outil de dÃ©centralisation** : il rend moins nÃ©cessaire de vivre dans les grandes mÃ©tropoles pour avoir les mÃªmes opportunitÃ©s.

### Des applications (SNCF Connect)
Les applications ne sont pas nÃ©cessaires Ã  l'emploi des solutions de transport. En revanche, elles contribuent fortement Ã  la simplification des dÃ©marches :
- Planification simplifiÃ©e
- VisibilitÃ© des offres de rÃ©duction
- AccÃ¨s aux informations (horaires)
- Achat des billets
- Meilleure comprÃ©hension et gain de temps

Ces applications permettent de favoriser l'accÃ¨s Ã  l'information. Dans le cas de SNCF connect par exemple, c'est Ã©galement un parcours utilisateur qui a entiÃ¨rement Ã©tÃ© repensÃ© ces derniÃ¨res annÃ©es pour le simplifier, et amÃ©liorer l'aisance d'utilisation.

En somme, les applications permettent une plus forte frÃ©quentation des services, grÃ¢ce Ã  la facilitation des dÃ©marches liÃ©es aux dÃ©placements longue distance

## Effets de la numÃ©risation
Les applications numÃ©riques de la SNCF remplacent en partie les billets papier achetÃ©s au guichet ainsi que les informations affichÃ©es en gare. Ces alternatives Â« physiques Â» existent toujours, mais elles sont dÃ©sormais utilisÃ©es en solution de secours, plutÃ´t quâ€™en premier rÃ©flexe.

Par exemple, de nombreuses gares ont rÃ©duit leurs horaires dâ€™ouverture ou fermÃ© certains guichets, obligeant les usagers Ã  passer par lâ€™application ou les bornes automatiques. Dans certaines petites gares, il nâ€™y a mÃªme plus aucun personnel sur place : sans smartphone ou connexion Internet, acheter un billet devient un vÃ©ritable parcours du combattant.

## ScÃ©narios d'usage et impacts
Nous imaginons deux scÃ©narios d'utilisation des applications de rÃ©servation de trains : l'achat d'un billet de train et la consultation de son billet. D'autres scÃ©narios peuvent Ãªtre envisagÃ©s, comme la consultation des horaires, mais ce scÃ©nario ressemble fortement au scÃ©nario de rÃ©servation de billet.

### ScÃ©nario 1 : "Achat d'un billet de train"
1. L'utilisateur renseigne ses gares de dÃ©part et de destination, ainsi que la date du voyage.
2. Ensuite, il sÃ©lectionne le voyage de son choix parmi ceux proposÃ©s.
3. Puis il sÃ©lectionne les options de son voyage (seconde ou premiÃ¨re classe, option vÃ©lo, siÃ¨ge)
4. Enfin, il valide le voyage et passe au paiement

### ScÃ©nario 2 : "Consultation de billets de train"
1. L'utilisateur se connecte Ã  son espace.
2. Il sÃ©lectionne le voyage Ã  venir concernÃ©.
3. Il accÃ¨de au billet, et peut par exemple le tÃ©lÃ©charger.


## Impact de l'exÃ©cution du scÃ©nario auprÃ¨s de diffÃ©rents services concurrents
L'EcoIndex d'une page (de A Ã  G) est calculÃ© (sources : EcoIndex, Octo, GreenIT) en fonction du positionnement de cette page parmi les pages mondiales concernant :
- le nombre de requÃªtes lancÃ©es,
- le poids des tÃ©lÃ©chargements,
- le nombre d'Ã©lÃ©ments du document.

Nous avons choisi de comparer l'impact des scÃ©narios sur les plateformes de rÃ©servation de train de divers pays, appartenant Ã  des compagnies ou non (SNCF Connect, Deutsche Bahn, 1.2.Train, Omio, Eurostar)

|Service|Score (sur 100)|Classe|DÃ©tail des mesures|
|---|---|---|---|
|SNCF Connect| 23  | F ğŸ”´  | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/SNCF%20Connect/declaration-environnementale.md)  |
|DB| 32 | E ğŸŸ  | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/Deutsche%20Bahn/declaration-environnementale.md)  | 
|1.2.Train|82|  A ğŸ”µ | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/1.2.Train/declaration-environnementale.md)  | 
|Omio| 40  | D ğŸŸ¡  | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/Omio/declaration-environnementale.md)  | 
|Eurostar| 15  | F ğŸ”´ | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/Eurostar/declaration-environnementale.md)  | 

__Tab.1__ : Mesure de l'EcoIndex moyen de divers services de rÃ©servation de trains.

Les mesures de l'impact moyen de ces services (cf. Tab.1) rÃ©vÃ¨lent des classes EcoIndex trÃ¨s faibles pour la plupart (D Ã  F). Seule la solution 1.2.Train, indÃ©pendante des compagnies, se dÃ©marque avec un score Ã©levÃ© (A). Cela peut s'expliquer par la structure trÃ¨s simple du site.

## ModÃ¨le Ã©conomique
Comme nous l'avons vu dans la section prÃ©cÃ©dente, parmi les choix de conception ayant le plus d'impact environnemental, la plupart sont directement liÃ©s au modÃ¨le Ã©conomique du service. C'est pourquoi il est nÃ©cessaire Ã  ce stade d'analyser leur modÃ¨le Ã©conomique et de dÃ©finir notre propre modÃ¨le permettant une conception plus frugale. 

|Service|Source de revenus|
|---|---|
|SNCF Connect|Vente de billets|
|DB|Vente de billets|
|1.2.Train|Commissions|
|Omio|Commissions|
|Eurostar|Vente de billets|

__Tab.2__ : Offre des services de rÃ©servation de billets de train.

Notre marchÃ© semble Ãªtre structurÃ© en oligopÃ´le : il y a plusieurs offreurs pour acheter le mÃªme billet de train. Le billet vendu est le mÃªme sur les diffÃ©rentes plateformes mais ces plateformes ne sont pas entiÃ¨rement identiques : fluiditÃ©, interface, expÃ©rience utilisateur. Les services de rÃ©servation sont substituables entre eux : si l'on ne souhaite pas acheter son billet de train sur SNCF Connect, on peut l'acheter sur 1.2.Train ou sur Omio.

1.2.Train dispose d'un modÃ¨le Ã©conomique fragile qu'il serait pertinent de renforcer, mais le site web est dÃ©jÃ  suffisamment sobre pour que l'on ne se penche pas sur ce cas dans le cadre de notre projet. Nous trvavaillerons donc sur SNCF Connect. Il n'y a pas de publicitÃ© sur la plateforme, qui semble uniquement se financer grÃ¢ce aux revenus des ventes de billets de train (service annexe). Nous voyons donc peu d'autres modÃ¨les Ã©conomiques pertinents, sachant que celui-ci semble largement viable.

|Source possible de revenus|Montant unitaire|QuantitÃ© nÃ©cessaire pour financer un salaire[^1]|
|---|---|---|
|Part sur les ventes de billets[^2]|0,90â‚¬|3966|

[^1]: BasÃ© sur le coÃ»t total employeur du salaire mÃ©dian 2025 soit 3569â‚¬ environ (source : [URSSAF](https://mon-entreprise.urssaf.fr/simulateurs/salaire-brut-net))
[^2]: Estimation sur la base de 2% des billets dÃ©diÃ©e Ã  la plateforme, les billets Ã©tant Ã  45â‚¬ en moyenne

## Maquette de l'interface et Ã©chantillon de donnÃ©es
Au vu des diffÃ©rents services comparÃ©s, des exigences environnementales exprimÃ©es plus haut et des scÃ©narios retenus, nous avons dÃ©fini pour notre prototype une maquette de l'interface et un Ã©chantillon de donnÃ©es rÃ©alistes.

Les ressources Web possÃ©dant une reprÃ©sentation sur notre application seront de deux types :
- Les rÃ©sultats de recherche de voyage (avec une HTTP-URI ayant pour chemin /?depart={gare_depart}&arrivee={gare_arrivee}&date={date})
- Un voyage proposÃ© (avec une HTTP-URI ayant pour chemin /{id})
  
<img src="./docs/mockup_search.JPG" alt="maquette de la page de recherche" height="500"/>   <img src="./docs/mockup_tripdetails.JPG" alt="maquette de la page de rÃ©sultats" height="500"/>


__Fig.1__: Maquette de la page de recherche // __Fig.2__: Maquette de la page de rÃ©sultats de recherche

Dans un objectif de sobriÃ©tÃ© environnementale, les rÃ©sultats de recherche se limiterons Ã  ceux du jour sÃ©lectionnÃ©.

Pour des raisons de respect des droits d'auteurs, nous utilisons des donnÃ©es gÃ©nÃ©rÃ©es (avec [dummy-json](https://dummyjson.com/)). Bien que fictives, ces donnÃ©es correspondent Ã  la structure des services concurrents : les voyages comportent une gare de dÃ©part et d'arrivÃ©e, une date, une heure de dÃ©part et d'arrivÃ©e, et un ou plusieurs tarifs.

## ImplÃ©mentation du scÃ©nario prioritaire

### Prototypage : FonctionnalitÃ©s pour le scÃ©nario prioritaire avec donnÃ©es chargÃ©es de maniÃ¨re statique
Pour cette premiÃ¨re version du prototype (v1.0.0):
- l'Ã©chantillon de donnÃ©es est encore chargÃ© dans le code de maniÃ¨re statique,
- les fonctionnalitÃ©s implÃ©mentÃ©es ne sont que celles nÃ©cessaires pour suivre le scÃ©nario prioritaire ("Acheter un billet de train").

Ce scÃ©nario nÃ©cessite de pouvoir naviguer entre plusieurs pages : 
- la page de recherche de voyage, oÃ¹ il est possible de rechercher des trajets
- la page de rÃ©sultats, oÃ¹ s'affichent les trajets correspondant aux critÃ¨res
- la page de dÃ©tails du trajet, une fois celui-ci sÃ©lectionnÃ©
- le panier, avant de passer au paiement du ou des billet(s)

### Page de recherche de voyage
La page d'accueil renvoie un formulaire permettant de renseigner ses critÃ¨res de recherche de voyage.

<img src="./docs/searchpage_screenshot.png" alt="prototype de la page de recherche" width="800"/>

__Fig.3__ : Prototype de la page de recherche de voyage

Pour l'instant, nous avons choisi un framework de mise en page minimaliste (PicoCSS). Dans la suite du projet, nous verrons si l'impact environnemental du passage Ã  un framework de mise en page plus puissant (comme Bootstrap) est acceptable.

Nous avons Ã©galement fait le choix de ne pas inclure de photographies, celles-ci n'Ã©tat pas nÃ©cessaires Ã  la rÃ©servation d'un billet de train.

Dans l'Ã©tat actuel du prototype, il est possible d'avoir une premiÃ¨re idÃ©e de l'impact environnemental du frontend. Bien entendu, il manque encore le chargement dynamique des donnÃ©es, mais nous pouvons dÃ©jÃ  Ã©valuer l'impact de l'affichage des donnÃ©es et du framework (au sens large : React, PicoCSS). Cette Ã©valuation de l'impact (cf. Tab.3) est dÃ©jÃ  encourageante en mode "dÃ©veloppement" mais encore plus en mode "prÃ©-production". Nous mesurons ici l'effet positif de l'adoption d'outils de dÃ©veloppement Web intÃ©grant la ["minification"](https://fr.wikipedia.org/wiki/Minification) (cf. WikipÃ©dia) du code et la concatÃ©nation du code d'une part et des feuilles de style d'autre part.

| |EcoIndex|GES (gCO2e)|Taille du DOM|RequÃªtes|Taille de la page (ko)|
|---|---|---|---|---|---|
|Mode "dÃ©veloppement"|79 B ğŸŸ¢ |1.42|81|29|1873|
|Mode "prÃ©-production"|91 A ğŸ”µ|1.18|78|6|145|

__Tab.3__ Mesure de l'EcoIndex moyen de notre prototype, dans le cadre du scÃ©nario nÂ°1

### Page de rÃ©sultats de recherche

La page de rÃ©sultats de recherche a pour HTTP-URI /trips, et affiche actuellement l'ensemble des donnÃ©es factices de faÃ§on statique. Ã€ plus long terme, une requÃªte GET sera ajoutÃ©e Ã  la suite de /trips afin d'afficher dynamiquement les rÃ©sultats selon les informations renseignÃ©es dans le formulaire de la page prÃ©cÃ©dente.

Depuis cette page, il est possible d'accÃ©der aux dÃ©tails de l'un des trajets afin de le rÃ©server, ou bien de retourner Ã  la page d'accueil en cliquant sur le titre de la page ("EcoTrain").

<img src="./docs/tripslist_screenshot.png" alt="prototype de la page de rÃ©sultats de recherche" width="800"/>

__Fig.4__ Prototype de la page de rÃ©sultats de recherche

### Page de dÃ©tails du trajet

Les pages des voyages ont pour HTTP-URI /trips/{id}. Dans notre jeu de donnÃ©es, chaque voyage dispose d'un ID unique qui est rÃ©employÃ© dans l'URI.

De mÃªme que prÃ©cÃ©demment, nous avons tentÃ© d'implÃ©menter cette page (cf. Fig. 4) conformÃ©ment Ã  ce que prÃ©voyait la maquette.

<img src="./docs/tripdetails_screenshot.png" alt="prototype de la page de dÃ©tails sur le trajet sÃ©lectionnÃ©" width="800"/>


__Fig.5__ Prototype de la page de dÃ©tails sur le trajet choisi

### Page du panier

<img src="./docs/cart_screenshot.png" alt="prototype de la page du panier" width="800"/>

__Fig.6__ : Prototype de la page du panier


### Impacts du scÃ©nario prioritaire (v1.0.0)

| |EcoIndex|GES (gCO2e)|Taille du DOM|RequÃªtes|Taille de la page (ko)|
|---|---|---|---|---|---|
|1. Renseigner les critÃ¨res de recherche pour son trajet |91 A ğŸ”µ|1.18|78|6|145|
|2. Consulter les trajets disponibles, et sÃ©lectionner celui de son choix|75 B ğŸŸ¢ |1.50|43|6|145|
|3. Consulter les dÃ©tails d'un trajet et l'ajouter au panier|94 A ğŸ”µ|1.12|47|6|145|
|4. Consulter son panier et accÃ©der au paiement|94 A ğŸ”µ|1.13|43|6|145|

__Tab.4__: Ã‰valuation de l'impact du scÃ©nario "Achat d'un billet de train" dans le prototype nÂ°1 (v1.0.0)

### Prototypage : DonnÃ©es statiques chargÃ©es de maniÃ¨re dynamique (v1.0.1)

Pour cette nouvelle version du prototype (v1.0.1), identique du point de vue fonctionnel, les donnÃ©es (toujours statiques) sont dÃ©sormais chargÃ©es par le frontend Ã  travers le rÃ©seau immÃ©diatement aprÃ¨s un premier affichage Ã  vide. Ce comportement, plus rÃ©aliste, n'a pour effet qu'une requÃªte supplÃ©mentaire par page affichÃ©e.

Concernant l'Ã©valuation de l'impact environnemental du scÃ©nario, par rapport au tableau prÃ©cÃ©dent (cf. Tab.2), Ã  l'exception du nombre de requÃªtes qui augmente lÃ©gÃ¨rement, les rÃ©sultats sont identiques.

| |EcoIndex|GES (gCO2e)|Taille du DOM|RequÃªtes|Taille de la page (ko)|
|---|---|---|---|---|---|
|1. Renseigner les critÃ¨res de recherche pour son trajet |91 A ğŸ”µ |1.18|81|6|146|
|2. Consulter les trajets disponibles, et sÃ©lectionner celui de son choix |75 B ğŸŸ¢|1.51|501|9|146|
|3. Consulter les dÃ©tails d'un trajet et l'ajouter au panier|93 A ğŸ”µ|1.14|47|9|146|
|4. Consulter son panier et accÃ©der au paiement|93 A ğŸ”µ|1.14|43|10|146|

__Tab.5__: Ã‰valuation de l'impact du scÃ©nario "Achat d'un billet de train", dans la version 1.0.1


## Mesures de la consommation Ã©nergÃ©tique lors du passage Ã  l'Ã©chelle

Maintenant que notre prototype est rÃ©aliste en termes de nombre de requÃªtes, nous pouvons simuler les effets du "passage Ã  l'Ã©chelle". 

Dans le cas des plateformes de trains et des fonctionnalitÃ©s prÃ©vues (consultation des voyages, achat de billet), l'augmentation de la quantitÃ© des donnÃ©es Ã  traiter pourrait provenir de la conservation de trajets passÃ©s dans la base de donnÃ©es, ainsi que des billets de voyages passÃ©s.
Ã€ raison de 15.000 trains circulant sur le rÃ©seau ferrÃ© chaque jour, si chacun d'eux effectue un seul trajet, cela augmenterait notre volumes de trajets de 15.000 par jour, soit 450.000 par mois.

Conserver ces donnÃ©es ne semble pas avoir une utilitÃ© suffisament importante pour justifier l'impact environnemental qui y serait associÃ©. Ainsi, nous ferons le choix de supprimer automatiquement les trajets passÃ©s.

De la mÃªme faÃ§on, les billets relatifs aux trajets passÃ©s ne seront pas conservÃ©s.

#### Ã‰volution de l'EcoIndex lors du passage Ã  l'Ã©chelle

Produites dÃ©sormais de maniÃ¨re automatique lors de l'intÃ©gration continue, les mesures nÃ©cessaires Ã  la production de l'EcoIndex, [avant](https://github.com/UTT-GL03/EcoTrain/actions/runs/19293859455/artifacts/4541500392) et [aprÃ¨s](https://github.com/UTT-GL03/EcoTrain/actions/runs/19298418224/artifacts/4543202028) la simulation du passage Ã  l'Ã©chelle retraduisent bien (cf. Tab.6) l'augmentation du poids des tÃ©lÃ©chargements, mais aussi de l'augmentation du nombre d'Ã©lÃ©ments de la page des titres.

Afin que la mesure puisse Ãªtre effectuÃ©e dans des dÃ©lais raisonnables, nous avons fait le choix de n'augmenter le nombre de voyages que d'un facteur 100 1500

|   | EcoIndex| GES (gCO2e) | Taille du DOM | RequÃªtes | Taille de la page (ko)
|---|--------:|------------:|--------------:|---------:|---------------------:
| 1. Renseigner les critÃ¨res de recherche pour son trajet | 84 A ğŸ”µ | 1,3 | 89 | <del>7</del><br/>6 | <del>430</del><br/>431
| 2. Lancer la recherche et consulter les trajets disponible, et sÃ©lectionner celui de son choix | <del>55 C ğŸ”µ</del><br/>50 D ğŸŸ¡ | <del>1,9</del><br/>2,1 | <del>972</del><br/>1771 | 1 | <del>470</del><br/>470
| 3. Selectionner son trajet | <del>87 A ğŸ”µ</del><br/>86 A ğŸ”µ | <del>1,3</del><br/>1,3 | 57 | 1 | <del>470</del><br/>761
| 4. Consulter les dÃ©tails du trajet, | <del>92 A ğŸ”µ</del><br/>87 A ğŸ”µ |  <del>1,2</del><br/>1,3 | 50 | 0 | <del>0</del><br/>761
| 5. Consulter son panier et accÃ©der au paiement | <del>88 A ğŸ”µ</del><br/>87 A ğŸ”µ |  <del>1,2</del><br/>1,3 | 50 | 1 | <del>0</del><br/>761

__Tab.6__: Effet du passage Ã  l'Ã©chelle sur l'impact du scÃ©nario "Achat d'un billet de train" dans le prototype v1.0.1.

On constate que la baisse de l'EcoIndex est la plus importante Ã  l'affichage des rÃ©sultats de recherche. Cela semble cohÃ©rent puisque c'est sur cette page qu'un grand nombre d'Ã©lÃ©ments (propositions de voyage de la base de donnÃ©es) va apparaÃ®tre.

Pour Ã©valuer plus prÃ©cisÃ©ment l'impact de la consultation des dÃ©tails d'un trajet, nous utiliserons un autre outil de mesure : GreenFrame.
